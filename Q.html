<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Surat Spesial üíå</title>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      background: radial-gradient(circle at top, #fff8f2, #fbeee5);
      font-family: 'Segoe UI', sans-serif;
      min-height: 100vh;
      overflow-x: hidden;
      overflow-y: auto;
      display: flex;
      justify-content: center;
      align-items: flex-end; /* ‚¨ÖÔ∏è posisi amplop di bawah layar */
      padding-bottom: 60px;  /* ‚¨ÖÔ∏è biar sedikit naik ke atas */
      position: relative;
    }

    canvas {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      pointer-events: none;
      z-index: 0;
    }

    .container {
      position: relative;
      display: flex;
      flex-direction: column;
      align-items: center;
      cursor: pointer;
      z-index: 2;
      width: 90%;
      max-width: 360px;
      transition: all 1s ease;
      transform: translateY(50%); /* ‚¨ÖÔ∏è amplop terlihat setengah */
    }

    .envelope {
      width: 100%;
      aspect-ratio: 1.6 / 1;
      background: #e0b89b;
      border-radius: 8px;
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.25);
      position: relative;
      overflow: hidden;
      transition: transform 1s ease;
      z-index: 2;
    }

    .bottom-flap {
      position: absolute;
      bottom: 0; left: 0;
      width: 100%; height: 100%;
      background: linear-gradient(to top, #d8a48f, #e8c4a3);
      clip-path: polygon(0% 100%, 50% 30%, 100% 100%);
      z-index: 1;
    }

    .top-flap {
      position: absolute;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: linear-gradient(to bottom, #c98a76, #e6b79e);
      clip-path: polygon(0 0, 50% 60%, 100% 0);
      transform-origin: top center;
      transition: transform 0.6s ease;
      z-index: 3;
    }

    .seal {
      position: absolute;
      top: 45%; left: 50%;
      transform: translate(-50%, -50%);
      width: 30px; height: 30px;
      background: radial-gradient(circle, #b6654e 20%, #7b3a2c 80%);
      border-radius: 50%;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
      z-index: 4;
    }

    .letter {
      position: relative;
      top: -40px;
      background: #fff;
      padding: 20px;
      width: 100%;
      border-radius: 10px;
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.25);
      color: #333;
      opacity: 0;
      transform: translateY(50px);
      transition: all 1s ease;
      z-index: 1;
      display: flex;
      align-items: center;
      gap: 15px;
      flex-wrap: wrap;
      text-align: center;
    }

    .letter p {
      flex: 1 1 100%;
      font-size: 15px;
      line-height: 1.6;
    }

    .bear {
      position: relative;
      width: 70px;
      height: 70px;
      background: #b46a43;
      border-radius: 50%;
      flex-shrink: 0;
      transform: scale(0);
      transition: transform 1s ease-in-out;
    }

    .bear::before,
    .bear::after {
      content: "";
      position: absolute;
      width: 28px;
      height: 28px;
      background: #b46a43;
      border-radius: 50%;
      top: -12px;
    }

    .bear::before { left: -8px; }
    .bear::after { right: -8px; }

    .face {
      position: absolute;
      width: 48px;
      height: 35px;
      background: #e3b7a0;
      border-radius: 50%;
      bottom: 12px;
      left: 50%;
      transform: translateX(-50%);
    }

    .eye {
      position: absolute;
      width: 8px;
      height: 8px;
      background: #333;
      border-radius: 50%;
      top: 22px;
    }

    .eye.left { left: 18px; }
    .eye.right { right: 18px; }

    .nose {
      position: absolute;
      width: 12px;
      height: 8px;
      background: #333;
      border-radius: 50% 50% 60% 60%;
      top: 35px;
      left: 50%;
      transform: translateX(-50%);
    }

    .mouth {
      position: absolute;
      width: 16px;
      height: 8px;
      border-bottom: 2px solid #333;
      border-radius: 0 0 20px 20px;
      top: 45px;
      left: 50%;
      transform: translateX(-50%);
    }

    /* ‚ú® Saat dibuka */
    .open {
      transform: translateY(0); /* naik ke tengah layar */
    }

    .open .envelope {
      transform: translateY(100px);
    }

    .open .top-flap {
      transform: rotateX(180deg);
    }

    .open .letter {
      opacity: 1;
      transform: translateY(0);
    }

    .open .bear {
      transform: scale(1);
    }

    @media (max-width: 380px) {
      .letter p { font-size: 14px; }
      .bear { width: 60px; height: 60px; }
    }
  </style>
</head>
<body>
  <canvas id="fireworks"></canvas>

  <div class="container" onclick="openEnvelope()">
    <div class="envelope">
      <div class="bottom-flap"></div>
      <div class="top-flap"></div>
      <div class="seal"></div>
    </div>

    <div class="letter">
      <p>
        Untukmu yang teristimewa üíñ<br><br>
        Seperti beruang yang hangat di musim dingin, begitulah pelukanku untukmu.<br>
        Semoga surat ini membawa senyum dan kehangatan di harimu.<br><br>
        üß∏ Dengan cinta,<br>
        Seseorang yang mengagumimu.
      </p>

      <div class="bear">
        <div class="face"></div>
        <div class="eye left"></div>
        <div class="eye right"></div>
        <div class="nose"></div>
        <div class="mouth"></div>
      </div>
    </div>
  </div>

  <script>
    const container = document.querySelector('.container');
    const canvas = document.getElementById('fireworks');
    const ctx = canvas.getContext('2d');
    let fireworks = [];
    let running = false;

    function resizeCanvas() {
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
    }
    window.addEventListener('resize', resizeCanvas);
    resizeCanvas();

    class Firework {
      constructor(x, y, color) {
        this.x = x;
        this.y = y;
        this.color = color;
        this.particles = [];
        this.createParticles();
      }

      createParticles() {
        for (let i = 0; i < 40; i++) {
          const angle = (Math.PI * 2 * i) / 40;
          const speed = Math.random() * 3 + 2;
          this.particles.push({
            x: this.x,
            y: this.y,
            dx: Math.cos(angle) * speed,
            dy: Math.sin(angle) * speed,
            life: 100 + Math.random() * 50,
          });
        }
      }

      update() {
        this.particles.forEach(p => {
          p.x += p.dx;
          p.y += p.dy;
          p.dy += 0.03;
          p.life--;
        });
        this.particles = this.particles.filter(p => p.life > 0);
      }

      draw() {
        this.particles.forEach(p => {
          ctx.beginPath();
          ctx.arc(p.x, p.y, 2, 0, Math.PI * 2);
          ctx.fillStyle = this.color;
          ctx.fill();
        });
      }
    }

    function animateFireworks() {
      if (!running) return;
      ctx.fillStyle = "rgba(0, 0, 0, 0.1)";
      ctx.fillRect(0, 0, canvas.width, canvas.height);
      fireworks.forEach(f => {
        f.update();
        f.draw();
      });
      fireworks = fireworks.filter(f => f.particles.length > 0);
      if (Math.random() < 0.05) triggerFireworks();
      requestAnimationFrame(animateFireworks);
    }

    function triggerFireworks() {
      const x = Math.random() * canvas.width;
      const y = Math.random() * (canvas.height / 2);
      const color = `hsl(${Math.random() * 360}, 80%, 60%)`;
      fireworks.push(new Firework(x, y, color));
    }

    function openEnvelope() {
      container.classList.toggle('open');
      if (container.classList.contains('open')) {
        running = true;
        animateFireworks();
      } else {
        running = false;
        ctx.clearRect(0, 0, canvas.width, canvas.height);
      }
    }
  </script>
</body>
</html>
